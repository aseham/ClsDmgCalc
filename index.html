<!DOCTYPE html>
<html>
<head>
  <title>Closers Damage Calculation</title>
  <link rel="stylesheet" href="index.css">
</head>

<body onload="start()">
  <p class="title_text">
    Please note: This damage calculations formula is a rough calculation<br>
    and is not directly taken from the game script.<br>
    Use final calculation result only for estimation purpose.
  </p>
  <p class="spoiler">
    But of course, it's more accurate than your DPS output in your character info.
  </p>
    
  <p class="title_text">  
    If there are bugs or errors, please send a detailed report to me here.<br>
  </p>
  
  <p> <!--calculations part-->
    <div class="div_front">
      <table  align=center>
        <tr>
          <td class="datas" valign=top>
            Base Damage
          </td>
          <td class="datas" valign=top>
            <input type=text name=dmg value=0></input>
          </td>
          <td></td>
          <td align=center valign=center colspan=6>
            Situationals
          </td>
        </tr>
        <tr>
          <td class="datas" valign=top>
            Ignore Def
          </td>
          <td class="datas" valign=top>
            <input type=text name=ignore_def value=0></input>
          </td>
          <td></td>
          <td align=center valign=center colspan=2>
            <input type=checkbox name=_aerial checked>Aerial</input>
          </td>
          <td align=center valign=center colspan=2>
            <input type=checkbox name=_back checked>Back</input>
          </td>
          <td align=center valign=center colspan=2>
            <input type=checkbox name=_chase checked>Chase</input>
          </td>
        </tr>
        <tr>
          <td class="datas" valign=top>
            Damage Bonus (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=dmg_bonus value=0></input>
          </td>
          <td></td>
          <td class="datas" valign=top>
            Aerial Damage Bonus (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=a_dmg_bonus value=0></input>
          </td>
          <td class="datas" valign=top>
            Back Damage Bonus (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=b_dmg_bonus value=0></input>
          </td>
          <td class="datas" valign=top>
            Chase Damage Bonus (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=c_dmg_bonus value=0></input>
          </td>
        </tr>
        
        <tr>
          <td class="datas" valign=top>
            Critical Rate (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=crate value=0></input>
          </td>
          <td></td>
          <td class="datas" valign=top>
            Aerial Critical Rate (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=a_crate value=0></input>
          </td>
          <td class="datas" valign=top>
            Back Critical Rate (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=b_crate value=0></input>
          </td>
          <td class="datas" valign=top>
            Chase Critical Rate (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=c_crate value=0></input>
          </td>
        </tr>
        
        <tr>
          <td class="datas" valign=top>
            Critical Damage (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=cdmg value=0></input>
          </td>
          <td></td>
          <td class="datas" valign=top>
            Aerial Critical Damage (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=a_cdmg value=0></input>
          </td>
          <td class="datas" valign=top>
            Back Critical Damage (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=b_cdmg value=0></input>
          </td>
          <td class="datas" valign=top>
            Chase Critical Damage (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=c_cdmg value=0></input>
          </td>
        </tr>
        
        <tr>
          <td class="datas" valign=top>
            Def Penetration (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=penet value=0></input>
          </td>
          <td></td>
          <td class="datas" valign=top>
            Aerial Def Penetration (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=a_penet value=0></input>
          </td>
          <td class="datas" valign=top>
            Back Def Penetration (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=b_penet value=0></input>
          </td>
          <td class="datas" valign=top>
            Chase Def Penetration (%)
          </td>
          <td class="datas" valign=top>
            <input type=text name=c_penet value=0></input>
          </td>
        </tr>
      </table>
      <hr>
      <table  align=center>
        <tr>
          <td class="datas" valign=top colspan=3>
            Total Damage Output per 100 hit, excluding Penetrations:
          </td>
          <td class="results" id="dmg_out" valign=top colspan=6>
            
          </td>
        </tr>
        <tr>
          <td class="datas" valign=top>
            Final Score:
          </td>
          <td class="results" id="score" valign=top colspan=8>
            0
          </td>
        </tr>
        <!--
         <tr>
          <td class="datas" valign=top>
            Final Rating:
          </td>
          <td class="results" id="rating" valign=top colspan=4>
            F-
          </td>
          <td class="datas" valign=top colspan=4>
            Base rating:
            <select name="rate_base">
              <option value="KR">KR (under development)</option>
              <option value="JP">JP</option>
              <option value="ID" selected>ID</option>
              <option value="CN">CN (under development)</option>
              <option value="PS">PS</option>
            </select>
          </td>
          
        </tr>
        -->
      </table>
      
    </div>
  </p>
  
</body>

<script type="text/javascript">
  var base_dmg = 0;
  var crate = 0;
  var cdmg = 0;
  
  var total;

	function start() {
		var myVar = setInterval(dmgOut100Hit, 10);
	}
	
  function fetchData() {
		base_dmg = parseFloat(document.getElementsByName("dmg")[0].value);
    crate = parseFloat(document.getElementsByName("crate")[0].value);
    cdmg = parseFloat(document.getElementsByName("cdmg")[0].value);
  }
  
  function dmgOut100Hit(){
    fetchData();
    total = (base_dmg + (crate*0.01) * (cdmg*0.01) * base_dmg) * 100;
    if (isNaN(total))
      document.getElementById("dmg_out").innerHTML = 0;
    else
      document.getElementById("dmg_out").innerHTML = total;
  }
	</script>

</html>